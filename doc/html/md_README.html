<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RayTracer: &lt;tt&gt;Ray Tracing em CUDA: implementação e comparação&lt;/tt&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RayTracer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><code>Ray Tracing em CUDA: implementação e comparação</code> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
&lt;tt&gt;Ray Tracing in CUDA: implementation and comparison&lt;/tt&gt;</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Apresentação</h2>
<p>O presente projeto foi originado no contexto das atividades da disciplina de pós-graduação <em>EA979A - Introdução a Computação Gráfica e Processamento de Imagens</em>, oferecida no primeiro semestre de 2022, na Unicamp, sob supervisão da Profa. Dra. Paula Dornhofer Paro Costa, do Departamento de Engenharia de Computação e Automação (DCA) da Faculdade de Engenharia Elétrica e de Computação (FEEC).</p>
<blockquote class="doxtable">
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Nome </th><th class="markdownTableHeadNone">RA </th><th class="markdownTableHeadNone">Curso  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">João Gabriel Segato Kruse </td><td class="markdownTableBodyNone">218615 </td><td class="markdownTableBodyNone">Eng. de Computação  </td></tr>
</table>
</blockquote>
<h2><a class="anchor" id="autotoc_md3"></a>
Descrição do Projeto</h2>
<p>Ray Tracing é uma técnica de computação gráfica que simula o trajeto de raios de luz para a renderização de imagens e é muito utilizada em uma variedade de algoritmos. Embora essa técnica consiga gerar imagens de muito boa qualidade, seu custo computacional é muito alto, necessitando de formas de otimizar sua execução. Uma das formas de fazer isso é através de APIs como a Nvidia CUDA, que foi projetada para a execução de códigos em paralelo e assim pode gerar uma grande aceleração desse processo. Assim, esse projeto tem como principal objetivo a implementação de um ray tracer com funcionalidades básicas utilizando CUDA e a posterior comparação de sua performance e imagens geradas com um ray tracer implementado usando apenas C++. Com isso, o projeto será composto das seguintes tarefas:</p><ul>
<li>Implementação de uma versão de ray tracer base em C++</li>
<li>Implementação de uma versão de ray tracer usando CUDA para acelerar algumas das etapas</li>
<li>Comparação da performance entre as implementações</li>
</ul>
<h3><a class="anchor" id="autotoc_md4"></a>
Ray Tracing</h3>
<p>Ray Tracing é um dos métodos que podem ser usados em técnicas de renderização, e ele acaba tendo um trade-off de imagens com maior qualidade, mas com um custo computacional muito maior. Assim, essa técnica geralmente era mais utilizada para renderizações em filmes e imagens, que não exigiam uma excecução muita rápida, mas para outras mídias como jogos, nas quais a taxa de quadros por segundo gerados dinâmicamente é essencial, outros métodos precisavam ser aplicados. Esse maior custo inerente ao Ray Tracing vem do fato dele traçar o caminho de um feixe imaginário indo de um ponto de foco e passando por cada pixel da imagem e calculando a cor visível por ele. Assim, temos a capacidade de simular efeitos óticos como a reflexão, refração, dispersão, além de outros efeitos mais complexos como motion blur, depth of field, etc. Recentemente, uma nova linha de placas lançada pela Nvidia trouxe acelerações em hardware para tarefas relacionadas a Ray Tracing, possibilitando agora seu uso em aplicações mais dinâmicas como jogos. <br  />
 Em traços gerais, o que o algoritmo faz é simular um raio saindo de um ponto de foco e um pixel até alguma superfície que bloqueie seu caminho, o que dará sua cor. Vale notar que cada superfície possui características próprias, podendo refletir, refratar, dispersar, etc o raio chegando nela, e isso precisa ser levado em conta também. Realizando essa simulação para um conjunto suficientemente grande de raios passando por todos os pixels da imagem e posteriormente usando outros métodos de processamento de imagem para remover possíveis artefatos e aliasing, chegamos em uma imagem final renderizada.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
CUDA</h3>
<p>Ray Tracing é uma técnica que permite paralelização de algumas de suas etapas, o que justifica o uso de linguagens e plataformas que possibilitem isso. CPUs são especialmente boas em processamentos sequenciais de dados, se especializando nisso com sua arquitetura, datapath e hierarquia de cache, mas para tarefas paralelizadas elas acabam não sendo ideais (elas possuem otimização na performance single-thread). Para esse tipo de projeto, GPUs podem ser mais apropriadas por seus designs e arquiteturas serem mais adaptados justamente a processamentos paralelos com seus milhares de "cores". Assim, foram desenvolvidas plataformas focadas no deselvolvimento de aplicações que usem a GPU, como é o exemplo da CUDA da Nvidia. CUDA é uma plataforma de computação paralela e modelo de programação criado para utilizar esse poder das "Unidades de Processamento Gráfico" e será usado nesse projeto com o objetivo de tentar acelerar o Ray Tracer.</p>
<h3><a class="anchor" id="autotoc_md6"></a>
Comparação</h3>
<p>Por fim, o projeto tem como objetivo a comparação da performance da implementação em C++ e em CUDA, tentando identificar os pontos de maior diferença entre os métodos e pontos nos quais ambas as técnicas não apresentam grandes diferenças, e justificar isso com base nos conhecimentos de arquitetura de computadores e do software e hardware utilizado.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Plano de Trabalho</h2>
<p>Para a realização desse trabalho as seguintes etapas serão necessárias:</p>
<p>-------------------------------------------&mdash; Entregável E1 -----------------------------------------------&mdash;</p>
<ul>
<li>Etapa 1 (1 semana): Estudo do funcionamento de um Ray Tracer</li>
</ul>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>Inicialmente será necessário um estudo do funcionamento de um ray tracer e dos algoritmos necessários para sua implementação. A conclusão dessa etapa consiste no entendimento dos algoritmos necessários, suas funções e em como eles podem ser implementados. </p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>Etapa 2 (1 semana): Implementação do Ray Tracer em C++</li>
</ul>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>Implementação de um primeiro Ray Tracer utilizando apenas C++. A conclusão dessa etapa consiste em um código em C++ funcional que consiga gerar imagens utilizando Ray Tracing. Esse Ray Tracer seguirá as funcões básicas apresentadas no projeto em [1], mas caso sobre tempo nessa etapa pode ser expandido com novas features (como as apresentadas nos 'Next Steps' de [1]) ou para incluir alguns elementos introduzidos em [5] e [6]. </p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>Etapa 3 (1 semana): Estudo do Nvidia CUDA</li>
</ul>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>Estudar e entender melhor o funcionamento do CUDA. A conclusão dessa etapa envolve uma compreensão mais aprofundada dos pontos e aplicações nos quais CUDA trará um benefício de desempenho, além de uma introdução a sua sintaxe e uso. Essa etapa também envolverá a configuração do ambiente necessária para a compilação dos códigos em CUDA. Esse Ray Tracer seguirá as funcões básicas apresentadas no projeto em [1] só que usando CUDA Caso sobre tempo nessa etapa pode ser expandido com novas features (como as apresentadas nos 'Next Steps' de [1]) ou para incluir alguns elementos introduzidos em [5] e [6]. </p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>Etapa 4 (1 semana): Implementação do Ray Tracer usando CUDA</li>
</ul>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>Implementação de um segundo Ray Tracer utilizando CUDA. A conclusão dessa etapa consiste em um código usando CUDA funcional que consiga gerar imagens utilizando Ray Tracing. </p>
</blockquote>
</blockquote>
</blockquote>
<p>-------------------------------------------&mdash; Entregável E2 -----------------------------------------------&mdash;</p>
<ul>
<li>Etapa 5 (1 semana): Testes e Comparação de Resultados</li>
</ul>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>Realização de testes de geração de imagens, medindo tempos de execução para que seja possível comparar a performance das diferentes implementações. A conclusão dessa etapa envolverá a geração de gráficos comparativos dos tempos de execução e análises dos principais pontos de diferença entre as implementações, tentando assim justificar os resultados obtidos. </p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>Etapa 6 (2 semanas): Preparação do Relatório e da Apresentação</li>
</ul>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>Escrita do relatório e preparação do material que será apresentado. A conclusão dessa etapa envolverá a preparação de um relatório delineando o projeto, sua implementação, resultados e conclusões; além de uma apresentação, que poderá ser no formato de slides ou algum outro formato expositivo, delineando os mesmo pontos. </p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>Extra (5 semanas): Tempo extra</li>
</ul>
<blockquote class="doxtable">
<blockquote class="doxtable">
<blockquote class="doxtable">
<p>Tempo extra que poderá ser usado para complementar as outras etapas caso ocorram imprevistos. Caso "sobre tempo" o projeto pode ser expandido: <br  />
 </p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>Incluindo novas features nos Ray Tracers implementados; <br  />
</li>
<li>Realizando uma outra implementação em Python, por exemplo, para comparar a performance também;</li>
</ul>
<p>-------------------------------------------&mdash; Entregável E3 -----------------------------------------------&mdash;</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Referências Bibliográficas</h2>
<p>[1] <a href="https://raytracing.github.io/books/RayTracingInOneWeekend.html">https://raytracing.github.io/books/RayTracingInOneWeekend.html</a> <br  />
 [2] <a href="https://developer.nvidia.com/blog/accelerated-ray-tracing-cuda/">https://developer.nvidia.com/blog/accelerated-ray-tracing-cuda/</a> <br  />
 [3] Pitkin, Thomas A.. “GPU ray tracing with CUDA.” (2013). <br  />
 [4] <a href="https://docs.nvidia.com/cuda/index.html">https://docs.nvidia.com/cuda/index.html</a> [5] <a href="https://raytracing.github.io/books/RayTracingTheNextWeek.html">https://raytracing.github.io/books/RayTracingTheNextWeek.html</a> [6] <a href="https://raytracing.github.io/books/RayTracingTheRestOfYourLife.html">https://raytracing.github.io/books/RayTracingTheRestOfYourLife.html</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
